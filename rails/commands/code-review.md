---
description: $ARGUMENTSブランチとのdiffを確認し、Railsのベストプラクティスに従ってコードレビューを行う
---

# Rails Code Review

指定されたブランチ（デフォルト: main）との差分を確認し、以下の観点からコードレビューを行ってください。

## レビュー観点

### Rubyらしさ

- Rubyらしく、簡潔かつわかりやすいコードになっているか
- 一般的ではないイディオムやシンタックスになっていないか

### Railsのベストプラクティス

- Fat Controller / Skinny Modelになっていないか
- Railsの規約に従っているか

### パフォーマンス

- N+1クエリが発生していないか
- 不要なクエリが発行されていないか
- 適切なindexが考慮されているか

### テスト

- 十分なテストカバレッジがあるか
- テストが適切な粒度で書かれているか
- エッジケースが考慮されているか

### クリーンなコード

- クラスやメソッドの呼び出しを削除する場合、該当のクラスやメソッドがデッドコードになっていないか
  - なっている場合はクラスやメソッド定義自体を削除すること

## 実行手順

1. `git diff $ARGUMENTS...HEAD` を実行してdiffを取得
2. 変更されたファイルの内容を確認
3. 上記の観点からレビューコメントを作成
4. 問題点がある場合は具体的な改善案を提示

## 出力形式

レビュー結果は以下の形式で出力してください：

- **問題の重要度**: Critical / Warning / Suggestion
- **該当ファイル・行**: ファイルパスと行番号
- **問題点**: 具体的な問題の説明
- **改善案**: どのように修正すべきか
